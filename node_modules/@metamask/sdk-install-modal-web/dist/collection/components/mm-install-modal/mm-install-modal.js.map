{"version":3,"file":"mm-install-modal.js","sourceRoot":"","sources":["../../../../src/components/mm-install-modal/mm-install-modal.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, h, Event, EventEmitter, State, Watch, Element } from '@stencil/core';\nimport { WidgetWrapper } from '../widget-wrapper/widget-wrapper';\nimport AdvantagesListItem from '../misc/AdvantagesListItem';\nimport WalletIcon from '../misc/WalletIcon';\nimport HeartIcon from '../misc/HeartIcon';\nimport LockIcon from '../misc/LockIcon';\nimport InstallIcon from '../misc/InstallIcon';\nimport SDKVersion from '../misc/SDKVersion';\nimport CloseButton from '../misc/CloseButton';\nimport Logo from '../misc/Logo';\nimport encodeQR from '@paulmillr/qr';\nimport { SimpleI18n } from '../misc/simple-i18n';\n@Component({\n  tag: 'mm-install-modal',\n  styleUrl: '../style.css',\n  shadow: true,\n})\nexport class InstallModal {\n  /**\n   * The QR code link\n   */\n  @Prop() link: string;\n\n  @Prop() sdkVersion?: string;\n\n  @Prop() preferDesktop: boolean;\n\n  private i18nInstance: SimpleI18n;\n\n  @Event() close: EventEmitter;\n\n  @Event() startDesktopOnboarding: EventEmitter;\n\n  @State() tab: number = 1;\n\n  @Element() el: HTMLElement;\n\n  @State() private translationsLoaded: boolean = false;\n\n  constructor() {\n    this.onClose = this.onClose.bind(this);\n    this.onStartDesktopOnboardingHandler = this.onStartDesktopOnboardingHandler.bind(this);\n    this.setTab = this.setTab.bind(this);\n    this.render = this.render.bind(this);\n    this.setTab(2);\n\n    this.i18nInstance = new SimpleI18n();\n  }\n\n  async connectedCallback() {\n    await this.i18nInstance.init({\n      fallbackLng: 'en'\n    });\n    this.translationsLoaded = true;\n  }\n\n  @Watch('preferDesktop')\n  updatePreferDesktop(newValue: boolean) {\n    if (newValue) {\n      this.setTab(1);\n    } else {\n      this.setTab(2);\n    }\n  }\n\n  @Watch('link')\n  updateLink(newLink: string) {\n    if (!this.translationsLoaded || this.tab !== 2) {\n      return;\n    }\n\n    const svgElement = encodeQR(newLink, \"svg\", {\n      ecc: \"medium\",\n      scale: 2\n    });\n\n    if (!this.el.shadowRoot) {\n      console.warn('Shadow root not found');\n      return;\n    }\n\n    const qrcodeDiv = this.el.shadowRoot.querySelector(\"#sdk-mm-qrcode\");\n\n    if (!qrcodeDiv) {\n      console.warn('QR code div not found');\n      return;\n    }\n\n    qrcodeDiv.innerHTML = svgElement;\n  }\n\n  @Watch('translationsLoaded')\n  onTranslationsLoaded(isLoaded: boolean) {\n    if (isLoaded && this.tab === 2) {\n      this.updateLink(this.link);\n    }\n  }\n\n  @Watch('tab')\n  onTabChange(newTab: number) {\n    if (newTab === 2 && this.translationsLoaded) {\n      this.updateLink(this.link);\n    }\n  }\n\n  onClose() {\n    this.close.emit();\n  }\n\n  onStartDesktopOnboardingHandler() {\n    this.startDesktopOnboarding.emit();\n  }\n\n  setTab(newTab: number) {\n    this.tab = newTab\n  }\n\n  componentDidLoad() {\n    this.updateLink(this.link);\n  }\n\n  render() {\n    if (!this.translationsLoaded) {\n      return null; // or a loading state\n    }\n\n    const t = (key: string) => this.i18nInstance.t(key);\n\n    return (\n      <WidgetWrapper className=\"install-model\">\n        <div class='backdrop' onClick={this.onClose}></div>\n        <div class='modal'>\n          <div class='closeButtonContainer'>\n            <div class='right'>\n              <span class='closeButton' onClick={this.onClose}>\n                <CloseButton />\n              </span>\n            </div>\n          </div>\n          <div class='logoContainer'>\n            <Logo />\n          </div>\n          <div>\n            <div class='tabcontainer'>\n              <div class='flexContainer'>\n                <div\n                  onClick={() => this.setTab(1)}\n                  class={`tab flexItem ${this.tab === 1 ? 'tabactive': ''}`}\n                >\n                  {t('DESKTOP')}\n                </div>\n                <div\n                  onClick={() => this.setTab(2)}\n                  class={`tab flexItem ${this.tab === 2 ? 'tabactive': ''}`}\n                >\n                  {t('MOBILE')}\n                </div>\n              </div>\n            </div>\n            <div style={{ display: this.tab === 1 ? 'none' : 'block' }}>\n              <div class='flexContainer'>\n                <div\n                  class='flexItem'\n                  style={{\n                    textAlign: 'center',\n                    marginTop: '4',\n                  }}\n                >\n                  <div id=\"sdk-mm-qrcode\" class='center'>\n                  </div>\n                  <div class='connectMobileText'>\n                    {t('SCAN_TO_CONNECT')} <br />\n                    <span class='blue'>\n                      <b>{t('META_MASK_MOBILE_APP')}</b>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div style={{ display: this.tab === 2 ? 'none' : 'block' }}>\n              <div class='item'>\n                <AdvantagesListItem\n                  Icon={HeartIcon}\n                  text={t('INSTALL_MODAL.TRUSTED_BY_USERS')}\n                />\n              </div>\n              <div class='item'>\n                <AdvantagesListItem\n                  Icon={WalletIcon}\n                  text={t('INSTALL_MODAL.LEADING_CRYPTO_WALLET')}\n                />\n              </div>\n              <div class='item'>\n                <AdvantagesListItem\n                  Icon={LockIcon}\n                  text={t('INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS')}\n                />\n              </div>\n\n              <button\n                class='button'\n                onClick={this.onStartDesktopOnboardingHandler}\n              >\n                <InstallIcon />\n                <span class='installExtensionText'>\n                  {t('INSTALL_MODAL.INSTALL_META_MASK_EXTENSION')}\n                </span>\n              </button>\n            </div>\n          </div>\n          <SDKVersion version={this.sdkVersion} />\n        </div>\n    </WidgetWrapper>\n    )\n  }\n}\n"]}